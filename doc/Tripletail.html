<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="ja-JP">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <title>Tripletail - Tripletail, Framework for Japanese Web Application</title>
  <link rel="index"     href="./" />
  <link rel="up"        href="../" />
</head>
<body>

<div class="pod_title_block">
Tripletail - Tripletail, Framework for Japanese Web Application


</div>

<!-- Begin TABLE_OF_CONTENTS -->
<div class="pod_toc">
<p>
<strong><span class="pod_lang">TABLE OF CONTENTS</span></strong>
</p>
<ul>
<li><a href="#NAME">
<span class="pod_lang">NAME

</span></a>
</li>
<li><a href="#NAME_(ja)">
<span class="pod_lang">NAME (ja)

</span></a>
</li>
<li><a href="#SYNOPSIS">
<span class="pod_lang">SYNOPSIS

</span></a>
</li>
<li><a href="#DESCRIPTION">
<span class="pod_lang">DESCRIPTION

</span></a>
<ul>
<li><a href="#use">
<span class="pod_lang"><code class="pod_iseq_C">use</code>

</span></a>
</li>
<li><a href="#Xe7X89Xb9Xe5X8cX96Xe6X8cX87Xe5XaeX9a">
<span class="pod_lang">特化指定

</span></a>
</li>
<li><a href="#Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5Xe3X81XaeXe5X88Xa9Xe7X94Xa8">
<span class="pod_lang">キャッシュの利用

</span></a>
</li>
<li><a href="#Xe5XaeX9fXe8Xa1X8cXe3X83Xa2Xe3X83XbcXe3X83X89">
<span class="pod_lang">実行モード

</span></a>
</li>
<li><a href="#Xe5X87XbaXe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">
<span class="pod_lang">出力フィルタ

</span></a>
</li>
<li><a href="#Xe5X85Xa5Xe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">
<span class="pod_lang">入力フィルタ

</span></a>
</li>
<li><a href="#MainXe9X96Xa2Xe6X95Xb0">
<span class="pod_lang">Main関数

</span></a>
</li>
<li><a href="#Xe3X83X95Xe3X83X83Xe3X82Xaf">
<span class="pod_lang">フック

</span></a>
</li>
<li><a href="#METHODS">
<span class="pod_lang">METHODS

</span></a>
</li>
<li><a href="#Ini_Xe3X83X91Xe3X83Xa9Xe3X83Xa1Xe3X83XbcXe3X82Xbf">
<span class="pod_lang">Ini パラメータ

</span></a>
</li>
<li><a href="#Xe5XbaXa6Xe9X87X8fXe8Xa1Xa1">
<span class="pod_lang">度量衡

</span></a>
<ul>
<li><a href="#Xe6X99X82Xe9X96X93Xe6X8cX87Xe5XaeX9a">
<span class="pod_lang">時間指定

</span></a>
</li>
<li><a href="#Xe9X87X8fXe6X8cX87Xe5XaeX9a">
<span class="pod_lang">量指定

</span></a>
<ul>
<li><a href="#X10Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">
<span class="pod_lang">10進数系

</span></a>
</li>
<li><a href="#X2Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">
<span class="pod_lang">2進数系

</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#SEE_ALSO">
<span class="pod_lang">SEE ALSO

</span></a>
</li>
<li><a href="#AUTHOR_INFORMATION">
<span class="pod_lang">AUTHOR INFORMATION

</span></a>
</li>
</ul>
</div>
<!-- End TABLE_OF_CONTENTS -->

<!-- Begin CONTENT -->

<hr />
<h1><a id="NAME">
<span class="pod_lang">NAME

</span></a></h1>

<p>
<span class="pod_lang">Tripletail - Tripletail, Framework for Japanese Web Application

</span>
</p>


<hr />
<h1><a id="NAME_(ja)">
<span class="pod_lang">NAME (ja)

</span></a></h1>

<p>
<span class="pod_lang">Tripletail - Tripletail, 日本語向けウェブアプリケーションフレームワーク

</span>
</p>


<hr />
<h1><a id="SYNOPSIS">
<span class="pod_lang">SYNOPSIS

</span></a></h1>

<pre class="pod_verbatim"><code>  use Tripletail qw(tl.ini);
  
  $TL-&gt;startCgi(
      -main =&gt; \&amp;main,
  );
  
  sub main {
      my $t = $TL-&gt;newTemplate('index.html');

      $t-&gt;flush;
  }</code></pre>


<hr />
<h1><a id="DESCRIPTION">
<span class="pod_lang">DESCRIPTION

</span></a></h1>

<h2><a id="use">
<span class="pod_lang"><code class="pod_iseq_C">use</code>

</span></a></h2>

<p>
<span class="pod_lang">tlでは、ライブラリの各種設定は <a href="././Tripletail/Ini.html">Ini</a> ファイルに置かれる。

</span>
</p>

<p>
<span class="pod_lang">実行が開始されるスクリプトの先頭で、次のように引数として <a href="././Tripletail/Ini.html">Ini</a>
ファイルの位置を渡す。するとグローバル変数 <code class="pod_iseq_C">$TL</code> がエクスポートされる。
<a href="././Tripletail/Ini.html">Ini</a> ファイル指定は必須である。

</span>
</p>

<pre class="pod_verbatim"><code>  use Tripletail qw(/home/www/ini/tl.ini);</code></pre>

<p>
<span class="pod_lang">他のファイルから <code class="pod_iseq_C">$TL</code> 変数を使う場合は、そのパッケージ内で
<code class="pod_iseq_C">use Tripletail;</code> のように引数無しで <code class="pod_iseq_C">use</code> する。二度目以降の <code class="pod_iseq_C">use</code> で
<a href="././Tripletail/Ini.html">Ini</a> ファイルの位置を指定しようとした場合はエラーとなる。

</span>
</p>

<p>
<span class="pod_lang">設定ファイルの設定値のうち、一部の値を特定のCGIで変更したい場合は、
次のように2つめ以降引数に特化指定をすることが出来る。

</span>
</p>

<pre class="pod_verbatim"><code>  use Tripletail qw(/home/www/ini/tl.ini golduser);</code></pre>

<p>
<span class="pod_lang">特化指定を行った場合、ライブラリ内で Ini ファイルを参照する際に、
まず「グループ名 + &quot;:&quot; + 特化指定値」のグループで検索を行う。
結果がなかった場合は、通常のグループ名の指定値が使用される。

</span>
</p>

<p>
<span class="pod_lang">また、サーバのIPやリモートのIPにより使用するグループを変更することも出来る。それぞれ
「グループ名 + &quot;@sever&quot; + 使用するサーバのマスク値」
「グループ名 + &quot;@remote&quot; + 使用するリモートのマスク値」
といった書式となる。

</span>
</p>

<p>
<span class="pod_lang">但し、スクリプトで起動した場合、リモートのIP指定している項目は全て無視される。
サーバのIP指定している項目の場合、hostname -iで取得した値でマッチされる。

</span>
</p>

<p>
<span class="pod_lang">使用するサーバのマスク値と、リモートのマスク値に関しては、Ini中の[HOST]グループに設定する。例えば次のようになる。

</span>
</p>

<pre class="pod_verbatim"><code>  [HOST]
  Debughost = 192.168.10.0/24
  Testuser = 192.168.11.5 192.168.11.50
  [TL@server:Debughost]
  logdir = /home/tl/logs
  errormail = tl@example.org
  [TL@server:Debughost]
  logdir = /home/tl/logs/regist</code></pre>

<p>
<span class="pod_lang">マスクは空白で区切って複数個指定する事が可能。

</span>
</p>

<p>
<span class="pod_lang">但し、[HOST]には特化指定は利用できない。

</span>
</p>

<p>
<span class="pod_lang">特化指定を二種、もしくは、三種を組み合わせて利用することも出来るが、その場合の順序は「グループ名 + &quot;:&quot; + 特化指定値 + &quot;@sever&quot; + 使用するサーバのマスク値 + &quot;@remote&quot; + 使用するリモートのマスク値」で固定であり、その他の並びで指定することは出来ない。

</span>
</p>

<p>
<span class="pod_lang">特化指定は複数行うことができ、その場合は最初の方に書いたものほど優先的に使用される。 

</span>
</p>

<h2><a id="Xe7X89Xb9Xe5X8cX96Xe6X8cX87Xe5XaeX9a">
<span class="pod_lang">特化指定

</span></a></h2>

<p>
<span class="pod_lang">特化指定の具体的例を示す

</span>
</p>

<pre class="pod_verbatim"><code>  [HOST]
  Debughost = 192.168.10.0/24
  Testuser = 192.168.11.5 192.168.11.50
  [TL:regist@server:Debughost]
  logdir = /home/tl/logs/regist/debug
  [TL@server:Debughost]
  logdir = /home/tl/logs
  errormail = tl@example.org
  [TL]
  logdir = /home/tl/logs
  [TL:regist]
  logdir = /home/tl/logs/regist
  [Debug@remote:Testuser]
  enable_debug=1</code></pre>

<p>
<span class="pod_lang">というtl.iniが存在している場合に

</span>
</p>

<pre class="pod_verbatim"><code>  use Tripletail qw(/home/www/ini/tl.ini regist);
で、起動した場合、次のような動作になる。</code></pre>

<p>
<span class="pod_lang">プログラムが動いているサーバが、192.168.10.0/24であり、アクセスした箇所のIPが192.168.11.5か192.168.11.50である場合

</span>
</p>

<pre class="pod_verbatim"><code>  [TL]
  logdir = /home/tl/logs/regist/debug
  errormail = tl@example.org
  [Debug]
  enable_debug=1</code></pre>

<p>
<span class="pod_lang">プログラムが動いているサーバが、192.168.10.0/24であり、アクセスした箇所のIPが192.168.11.5か192.168.11.50では無い場合

</span>
</p>

<pre class="pod_verbatim"><code>  [TL]
  logdir = /home/tl/logs/regist

  use Tripletail qw(/home/www/ini/tl.ini regist);
で、起動した場合、次のような動作になる。</code></pre>

<p>
<span class="pod_lang">プログラムが動いているサーバが、192.168.10.0/24であり、アクセスした箇所のIPが192.168.11.5か192.168.11.50である場合

</span>
</p>

<pre class="pod_verbatim"><code>  [TL]
  logdir = /home/tl/logs/debug
  errormail = tl@example.org
  [Debug]
  enable_debug=1</code></pre>

<p>
<span class="pod_lang">プログラムが動いているサーバが、192.168.10.0/24であり、アクセスした箇所のIPが192.168.11.5か192.168.11.50では無い場合

</span>
</p>

<pre class="pod_verbatim"><code>  [TL]
  logdir = /home/tl/logs</code></pre>

<h2><a id="Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5Xe3X81XaeXe5X88Xa9Xe7X94Xa8">
<span class="pod_lang">キャッシュの利用

</span></a></h2>

<p>
<span class="pod_lang">Cache::Memcachedがインストールされ、memcachedサーバがある場合に、キャッシュが利用可能となる。

</span>
</p>

<p>
<span class="pod_lang">具体例は次の通り

</span>
</p>

<p>
<span class="pod_lang">INIファイルにて、memcachedが動いているサーバを指定する。
[MemCached]
servers = localhost:11211

</span>
</p>

<dl>
<dt><a id="Xe8XaaXadXe3X81XbfXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83X9aXe3X83XbcXe3X82Xb8Xe5X85Xa8Xe4XbdX93Xe3X82X92Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5XefXbcX89"><span class="pod_lang">読み込み側例（ページ全体をキャッシュ）

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  #topはキャッシュするキー。画面毎にキーを設定する。ページャーなどを利用する場合、画面毎になる点を注意する（page-1等にする）
  #キャッシュにヒットした場合、時間を比較して、304でリダイレクトするか、メモリから読み込んで表示する
  #printCacheUnlessModifiedでundefが返ってきた後は、printやflushなど出力する操作は不可なため注意する事
  return if(!defined($TL-&gt;printCacheUnlessModified('top')));
  #キャッシュすることを宣言する。なお、宣言はprintCacheUnlessModifiedより後でprintより前であれば、どの時点で行ってもかまわない
  $TL-&gt;setCache('top');

  #実際のスクリプトを記述し、出力を行う
  
  $TL-&gt;print('test code.');</code></pre>

</dd>
<dt><a id="Xe6X9bXb8Xe3X81X8dXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83X9aXe3X83XbcXe3X82Xb8Xe5X85Xa8Xe4XbdX93Xe3X82X92Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5XefXbcX89"><span class="pod_lang">書き込み側例（ページ全体をキャッシュ）

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  #書き込みを行った場合、そのデータを表示する可能性があるキャッシュを全て削除する
  #削除漏れがあると、キャッシュしている内容が必要な為注意が必要。
  $TL-&gt;deleteCache('top');
  $TL-&gt;deleteCache('top2');</code></pre>

</dd>
<dt><a id="Xe8XaaXadXe3X81XbfXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83Xa6Xe3X83XbcXe3X82Xb6Xe3X83XbcXe5X90X8dXe7XadX89Xe4Xb8X80Xe9X83Xa8Xe3X81XabXe5X9bXbaXe6X9cX89Xe3X81XaeXe6X83X85Xe5Xa0Xb1Xe3X82X92Xe5X9fX8bXe3X82X81Xe8XbeXbcXe3X82X93Xe3X81Xa7Xe3X81X84Xe3X82X8bXe5Xa0Xb4Xe5X90X88XefXbcX89"><span class="pod_lang">読み込み側例（ユーザー名等一部に固有の情報を埋め込んでいる場合）

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  #クッキーデータの取得、クッキーに固有の情報を入れておくと高速に動作出来る（DB等から読み込みTripletail::Formクラスにセットしても可）
  my $cookiedata = $TL-&gt;getCookie-&gt;get('TLTEST');
  $cookiedata-&gt;set('&lt;&amp;NAME&gt;' =&gt; $name) if(!$cookiedata-&gt;exists('name'));
  $cookiedata-&gt;set('&lt;&amp;POINT&gt;' =&gt; $point) if(!$cookiedata-&gt;exists('point'));

  #topはキャッシュするキー。固有情報が変更された場合、キャッシュ情報をクリアしないと永遠に情報が変わらない為、
  #304は通常無効にする必要がある。
  #固有の情報を置換するための情報をセットする。キーがそのまま置換される。
  #その他の条件はページ全体をキャッシュする場合と同様。
  return if(!defined($TL-&gt;printCacheUnlessModified('top','off',$cookiedata)));
  #キャッシュすることを宣言する。その際、固有の情報を置換するための情報をセットする。
  $TL-&gt;setCache('top',$cookiedata);

  #実際のスクリプトを記述し、出力を行う
  #この際、固有の情報の部分に関しては、特殊タグ（文字列）に置換する。特殊タグはどのような形でもかまわないが、
  #出力文字列中の全ての同様の特殊タグが変換対象になるため、ユーザーや管理者が任意に変更出来る部分に注意する。
  #（タグエスケープする、その特殊タグが入力された場合エラーにするetc）
  
  $t-&gt;expand(
    NAME =&gt; '&lt;&amp;NAME&gt;',
    POINT =&gt; '&lt;&amp;POINT&gt;',
  );

  
  $TL-&gt;print('test code.');</code></pre>

</dd>
<dt><a id="Xe6X9bXb8Xe3X81X8dXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83Xa6Xe3X83XbcXe3X82Xb6Xe3X83XbcXe5X90X8dXe7XadX89Xe4Xb8X80Xe9X83Xa8Xe3X81XabXe5X9bXbaXe6X9cX89Xe3X81XaeXe6X83X85Xe5Xa0Xb1Xe3X82X92Xe5X9fX8bXe3X82X81Xe8XbeXbcXe3X82X93Xe3X81Xa7Xe3X81X84Xe3X82X8bXe5Xa0Xb4Xe5X90X88XefXbcX89"><span class="pod_lang">書き込み側例（ユーザー名等一部に固有の情報を埋め込んでいる場合）

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  #書き込みを行った場合、そのデータを表示する可能性があるキャッシュを全て削除する
  #削除漏れがあると、キャッシュしている内容が必要な為注意が必要。
  #また、固有の文字列を出力用にクッキーなどに書き出したりする。
  $TL-&gt;getCookie-&gt;set(TLTEST =&gt; $TL-&gt;newForm('&lt;&amp;NAME&gt;' =&gt; $CGI-&gt;get('name'),'&lt;&amp;POINT&gt;' =&gt; 1000));

  $TL-&gt;deleteCache('top');
  $TL-&gt;deleteCache('top2');</code></pre>

</dd>
</dl>

<h2><a id="Xe5XaeX9fXe8Xa1X8cXe3X83Xa2Xe3X83XbcXe3X83X89">
<span class="pod_lang">実行モード

</span></a></h2>

<p>
<span class="pod_lang">実行モードには次の三つがある。

</span>
</p>

<dl>
<dt><a id="CGIXe3X83Xa2Xe3X83XbcXe3X83X89"><span class="pod_lang">CGIモード

</span></a></dt>
<dd>
<p>
<span class="pod_lang">CGIとしてプログラムを動作させるモード。このモードでは <code class="pod_iseq_C">$TL-&gt;print</code>
メソッドや <a href="#Xe5X87XbaXe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">&quot;出力フィルタ&quot;</a> 、 <a href="#Xe5X85Xa5Xe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">&quot;入力フィルタ&quot;</a> が利用可能になる。

</span>
</p>

<p>
<span class="pod_lang">このモードでは <a href="#startCgi">$TL-&gt;startCgi</a> メソッドで <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> を呼ぶ。

</span>
</p>

</dd>
<dt><a id="FastCGIXe3X83Xa2Xe3X83XbcXe3X83X89"><span class="pod_lang">FastCGIモード

</span></a></dt>
<dd>
<p>
<span class="pod_lang">FastCGIとしてプログラムを動作させるモード。httpdからfcgiスクリプトとして起動
しようとすると、自動的に選ばれる。このモードではプロセスのメモリ使用量を
監視し、起動後にある一定の大きさを越えてメモリ使用量が増大すると、メモリリーク
が発生しているとして自動的に終了する。また、 <a href="././Tripletail/Ini.html">Ini</a> パラメータ付きで
<code class="pod_iseq_C">use Tripletail</code> したスクリプトファイルや、その <a href="././Tripletail/Ini.html">Ini</a> ファイルの最終更新時刻
も監視し、更新されていたら自動的に終了する。

</span>
</p>

</dd>
<dt><a id="Xe4Xb8X80Xe8X88XacXe3X82Xb9Xe3X82XafXe3X83XaaXe3X83X97Xe3X83X88Xe3X83Xa2Xe3X83XbcXe3X83X89"><span class="pod_lang">一般スクリプトモード

</span></a></dt>
<dd>
<p>
<span class="pod_lang">CGIでない一般のスクリプトとしてプログラムを動作させるモード。
CGIモード特有の機能は利用出来ない。

</span>
</p>

<p>
<span class="pod_lang">このモードでは <a href="#errorTrap">$TL-&gt;errorTrap</a> メソッドで <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> を呼ぶ。

</span>
</p>

</dd>
</dl>

<h2><a id="Xe5X87XbaXe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">
<span class="pod_lang">出力フィルタ

</span></a></h2>

<p>
<span class="pod_lang"><a href="#print">$TL-&gt;print</a> や <a href="././Tripletail/Template.html#flush">$template-&gt;flush</a>
で出力される内容は、 <a href="././Tripletail/Filter.html">Tripletail::Filter</a> によって加工される。出力の先頭にHTTPヘッダを
付加するのも出力フィルタである。

</span>
</p>

<h2><a id="Xe5X85Xa5Xe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">
<span class="pod_lang">入力フィルタ

</span></a></h2>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$ENV{QUERY_STRING}</code> その他のCGIのリクエスト情報は、 <a href="././Tripletail/InputFilter.html">Tripletail::InputFilter</a>
が読み取り、 <a href="././Tripletail/Form.html">Tripletail::Form</a> オブジェクトを生成する。得られたリクエスト情報は
$CGI オブジェクトか <a href="#CGI">$TL-&gt;CGI</a> メソッドで取得出来る。

</span>
</p>

<h2><a id="MainXe9X96Xa2Xe6X95Xb0">
<span class="pod_lang">Main関数

</span></a></h2>

<p>
<span class="pod_lang">リクエスト一回毎に呼ばれる関数。この関数の中でCGIプログラムは入出力を行う。
<a href="#FastCGIXe3X83Xa2Xe3X83XbcXe3X83X89">&quot;FastCGIモード&quot;</a> 以外では一度のプロセスの起動で一度しか呼ばれない。

</span>
</p>

<h2><a id="Xe3X83X95Xe3X83X83Xe3X82Xaf">
<span class="pod_lang">フック

</span></a></h2>

<p>
<span class="pod_lang"><a href="#setHook">$TL-&gt;setHook</a> メソッドを用いてフックを掛ける事が出来る。

</span>
</p>

<dl>
<dt><a id="init"><span class="pod_lang">init

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="#startCgi">&quot;startCgi&quot;</a> もしくは <a href="#errorTrap">&quot;errorTrap&quot;</a> が呼ばれ、最初に <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> が
呼ばれる前。

</span>
</p>

</dd>
<dt><a id="preRequest"><span class="pod_lang">preRequest

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> が呼ばれる直前。

</span>
</p>

</dd>
<dt><a id="postRequest"><span class="pod_lang">postRequest

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> が呼ばれた直後。

</span>
</p>

</dd>
<dt><a id="term"><span class="pod_lang">term

</span></a></dt>
<dd>
<p>
<span class="pod_lang">最後に <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> が呼ばれた後。termフック呼出し後に <a href="#startCgi">&quot;startCgi&quot;</a>
もしくは <a href="#errorTrap">&quot;errorTrap&quot;</a> が終了する。

</span>
</p>

</dd>
</dl>

<h2><a id="METHODS">
<span class="pod_lang">METHODS

</span></a></h2>

<dl>
<dt><a id="INI"><span class="pod_lang"><code class="pod_iseq_C">INI</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;INI</code></pre>

<p>
<span class="pod_lang"><code class="pod_iseq_C">use Tripletail qw(filename.ini);</code> で読み込まれた <a href="././Tripletail/Ini.html">Tripletail::Ini</a> を返す。

</span>
</p>

</dd>
<dt><a id="CGI"><span class="pod_lang"><code class="pod_iseq_C">CGI</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;CGI
  $CGI</code></pre>

<p>
<span class="pod_lang">リクエストを受け取った <a href="././Tripletail/Form.html">Tripletail::Form</a> オブジェクトを返す。
また、このオブジェクトは startCgi メソッドの呼び出し元パッケージに export される。

</span>
</p>

<p>
<span class="pod_lang">このメソッドがundefでない値を返すのは、 <a href="#preRequest">&quot;preRequest&quot;</a> フックが呼ばれる
直前から <a href="#postRequest">&quot;postRequest&quot;</a> フックが呼ばれた直後までである。

</span>
</p>

</dd>
<dt><a id="escapeTag"><span class="pod_lang"><code class="pod_iseq_C">escapeTag</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;escapeTag($value)</code></pre>

<p>
<span class="pod_lang">&amp;&lt;&gt;&quot;' の文字をエスケープ処理した文字列を返す。

</span>
</p>

</dd>
<dt><a id="unescapeTag"><span class="pod_lang"><code class="pod_iseq_C">unescapeTag</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;unescapeTag($value)</code></pre>

<p>
<span class="pod_lang">&amp;&lt;&gt;&quot;'&amp;#??;&amp;#x??; にエスケープ処理された文字を元に戻した文字列を返す。

</span>
</p>

</dd>
<dt><a id="escapeJs"><span class="pod_lang"><code class="pod_iseq_C">escapeJs</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;escapeJs($value)</code></pre>

<p>
<span class="pod_lang">'&quot;\ の文字を \ を付けてエスケープし，'\r' '\n' について '\\r' '\\n' に置き換える。

</span>
</p>

</dd>
<dt><a id="unescapeJs"><span class="pod_lang"><code class="pod_iseq_C">unescapeJs</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;unescapeJs($value)</code></pre>

<p>
<span class="pod_lang">escapeJs した文字列を元に戻す。

</span>
</p>

</dd>
<dt><a id="encodeURL"><span class="pod_lang"><code class="pod_iseq_C">encodeURL</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;encodeURL($value)</code></pre>

<p>
<span class="pod_lang">文字列をURLエンコードした結果を返す。

</span>
</p>

</dd>
<dt><a id="decodeURL"><span class="pod_lang"><code class="pod_iseq_C">decodeURL</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = decodeURL($value)</code></pre>

<p>
<span class="pod_lang">URLエンコードを解除し元に戻した文字列を返す。

</span>
</p>

</dd>
<dt><a id="escapeSqlLike"><span class="pod_lang"><code class="pod_iseq_C">escapeSqlLike</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;escapeSqlLike($value)</code></pre>

<p>
<span class="pod_lang">% _ \ の文字を \ でエスケープ処理した文字列を返す。

</span>
</p>

</dd>
<dt><a id="unescapeSqlLike"><span class="pod_lang"><code class="pod_iseq_C">unescapeSqlLike</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;unescapeSqlLike($value)</code></pre>

<p>
<span class="pod_lang">\% \_ \\ にエスケープ処理された文字を元に戻した文字列を返す。

</span>
</p>

</dd>
<dt><a id="startCgi"><span class="pod_lang"><code class="pod_iseq_C">startCgi</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;startCgi(
    -main        =&gt; \&amp;Main,    # メイン関数
    -DB          =&gt; 'DB',      # DBを使う場合，iniのグループ名を指定
    -Session =&gt; 'Session',     # Sessionを使う場合、iniのグループ名を指定
  );</code></pre>

<p>
<span class="pod_lang">CGIを実行する為の環境を整えた上で、 <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> を実行する。
<a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> がdieした場合は、エラー表示HTMLが出力される。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">DB</code> は、次のように配列へのリファレンスを渡す事で、複数指定可能。

</span>
</p>

<pre class="pod_verbatim"><code>  $TL-&gt;startCgi(
    -main =&gt; \&amp;Main,
    -DB   =&gt; ['DB1', 'DB2'],
  );</code></pre>

<p>
<span class="pod_lang"><code class="pod_iseq_C">Session</code> は、次のように配列へのリファレンスを渡す事で、複数指定可能。

</span>
</p>

<pre class="pod_verbatim"><code>  $TL-&gt;startCgi(
    -main        =&gt; \&amp;Main,
    -DB          =&gt; 'DB',
    -Session =&gt; ['Session1', 'Session2'],
  );</code></pre>

</dd>
<dt><a id="errorTrap"><span class="pod_lang"><code class="pod_iseq_C">errorTrap</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;errorTrap(
    -main =&gt; \&amp;Main, # メイン関数
    -DB   =&gt; 'DB',   # DBを使う場合，iniのグループ名を指定
  );</code></pre>

<p>
<span class="pod_lang">環境を整え、 <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> を実行する。
<a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> がdieした場合は、エラー内容が標準エラーへ出力される。

</span>
</p>

<p>
<span class="pod_lang"><a href="#startCgi">&quot;startCgi&quot;</a> と同様に、<code class="pod_iseq_C">DB</code> には配列へのリファレンスを渡す事も出来る。

</span>
</p>

</dd>
<dt><a id="dispatch"><span class="pod_lang"><code class="pod_iseq_C">dispatch</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $result = $TL-&gt;dispatch($value, default =&gt; $default, onerror =&gt; \&amp;Error)</code></pre>

<p>
<span class="pod_lang">'Do' と $value を繋げた関数名の関数を呼び出す。
$valueがundefの場合、defaultを指定していた場合、defaultに設定される。

</span>
</p>

<p>
<span class="pod_lang">onerrorが未設定で関数が存在しなければ undef、存在すれば1を返す。

</span>
</p>

<p>
<span class="pod_lang">onerrorが設定されていた場合、関数が存在しなければ onerrorで設定された関数が呼び出される。

</span>
</p>

<pre class="pod_verbatim"><code>  例:
  package Foo;
  
  sub main {
      my $what = 'Foo';
      $TL-&gt;dispatch($what, default =&gt; 'Foo', onerror =&gt; \&amp;DoError);
  }
  
  sub DoFoo {
      ...
  }

  sub DoError {
      ...
  }</code></pre>

</dd>
<dt><a id="log"><span class="pod_lang"><code class="pod_iseq_C">log</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;log($group =&gt; $log)</code></pre>

<p>
<span class="pod_lang">ログを記録する。グループとログデータの２つを受け取る。

</span>
</p>

<p>
<span class="pod_lang">ログにはヘッダが付けられ、ヘッダは「時刻(epoch値の16進数8桁表現) プロセスIDの16進数4桁表現 FastCGIのリクエスト回数の16進数4桁表現 [グループ]」の形で付けられる。

</span>
</p>

</dd>
<dt><a id="getLogHeader"><span class="pod_lang"><code class="pod_iseq_C">getLogHeader</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  my $logid = $TL-&gt;getLogHeader</code></pre>

<p>
<span class="pod_lang">ログを記録するときのヘッダと同じ形式の文字列を生成する。
「時刻(epoch値の16進数8桁表現) プロセスIDの16進数4桁表現 FastCGIのリクエスト回数の16進数4桁表現」の形の文字列が返される。

</span>
</p>

</dd>
<dt><a id="setHook"><span class="pod_lang"><code class="pod_iseq_C">setHook</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;setHook($type, $priority, \&amp;func)</code></pre>

<p>
<span class="pod_lang">指定タイプの指定プライオリティのフックを設定する。
既に同一タイプで同一プライオリティのフックが設定されていた場合、
古いフックの設定は解除される。

</span>
</p>

<p>
<span class="pod_lang">typeは、<a href="#init">&quot;init&quot;</a>, <a href="#term">&quot;term&quot;</a>, <a href="#preRequest">&quot;preRequest&quot;</a>, <a href="#postRequest">&quot;postRequest&quot;</a>
の４種類が存在する。

</span>
</p>

<p>
<span class="pod_lang">なお、1万の整数倍のプライオリティは Tripletail 内部で使用される。アプリ
ケーション側で不用意に用いるとフックを上書きしてしまう可能性があるので
注意する。

</span>
</p>

</dd>
<dt><a id="removeHook"><span class="pod_lang"><code class="pod_iseq_C">removeHook</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;removeHook($type, $priority)</code></pre>

<p>
<span class="pod_lang">指定タイプの指定プライオリティのフックを削除する。

</span>
</p>

</dd>
<dt><a id="setContentFilter"><span class="pod_lang"><code class="pod_iseq_C">setContentFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;setContentFilter($classname, %option)
  $TL-&gt;setContentFilter([$classname, $priority], %option)
  $TL-&gt;setContentFilter('Tripletail::Filter::HTML', charset =&gt; 'Shift_JIS')
  $TL-&gt;setContentFilter(
      'Tripletail::Filter::CSV', charset =&gt; 'Shift_JIS', filename =&gt; 'テストデータ.csv')</code></pre>

<p>
<span class="pod_lang"><a href="#Xe5X87XbaXe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">&quot;出力フィルタ&quot;</a> を設定する。
全ての出力の前に実行する必要がある。
２番目の書式では、プライオリティを指定して独自のコンテンツフィルタを追加できる。
省略時は優先度は1000となる。同一優先度のフィルタが既にセットされているときは、
以前のフィルタ設定は解除される。

</span>
</p>

<p>
<span class="pod_lang">返される値は、指定された <a href="././Tripletail/Filter.html">Tripletail::Filter</a> のサブクラスのインスタンスである。

</span>
</p>

<p>
<span class="pod_lang">設定したフィルタは、<a href="#preRequest">&quot;preRequest&quot;</a> のタイミングで保存され、
<a href="#postRequest">&quot;postRequest&quot;</a> のタイミングで元に戻される。従って、<a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a>内
で setContentFilter を実行した場合、その変更は次回リクエスト時に持ち越
されない。

</span>
</p>

</dd>
<dt><a id="getContentFilter"><span class="pod_lang"><code class="pod_iseq_C">getContentFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;getContentFilter($priority)</code></pre>

<p>
<span class="pod_lang">指定されたプライオリティのフィルタを取得する。省略時は1000となる。

</span>
</p>

</dd>
<dt><a id="removeContentFilter"><span class="pod_lang"><code class="pod_iseq_C">removeContentFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;removeContentFilter($priority)</code></pre>

<p>
<span class="pod_lang">指定されたプライオリティのフィルタを削除する。省略時は1000となる。
フィルタが１つもない場合は、致命的エラーとなり出力関数は使用できなくなる。

</span>
</p>

</dd>
<dt><a id="setInputFilter"><span class="pod_lang"><code class="pod_iseq_C">setInputFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;setInputFilter($classname, %option)
  $TL-&gt;setInputFilter([$classname, $priority], %option)</code></pre>

<p>
<span class="pod_lang"><a href="#Xe5X85Xa5Xe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">&quot;入力フィルタ&quot;</a> を設定する。
<a href="#startCgi">&quot;startCgi&quot;</a> の前に実行する必要がある。

</span>
</p>

<p>
<span class="pod_lang">返される値は、指定された <a href="././Tripletail/InputFilter.html">Tripletail::InputFilter</a> のサブクラスのインスタンスである。

</span>
</p>

</dd>
<dt><a id="getInputFilter"><span class="pod_lang"><code class="pod_iseq_C">getInputFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;getInputFilter($priority)</code></pre>

</dd>
<dt><a id="removeInputFilter"><span class="pod_lang"><code class="pod_iseq_C">removeInputFilter</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;removeInputFilter($priority)</code></pre>

</dd>
<dt><a id="sendError"><span class="pod_lang"><code class="pod_iseq_C">sendError</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;sendError(-title =&gt; &quot;タイトル&quot;, -error =&gt; &quot;エラー&quot;)</code></pre>

<p>
<span class="pod_lang"><a href="././Tripletail/Ini.html">ini</a> で指定されたアドレスにエラーメールを送る。
設定が無い場合は何もしない。

</span>
</p>

</dd>
<dt><a id="print"><span class="pod_lang"><code class="pod_iseq_C">print</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;print($str)</code></pre>

<p>
<span class="pod_lang">コンテンツデータを出力する。<a href="#startCgi">&quot;startCgi&quot;</a> から呼ばれた <a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> 内
のみで使用できる。ヘッダは出力できない。

</span>
</p>

<p>
<span class="pod_lang">フィルタによってはバッファリングされる場合もあるが、
基本的にはバッファリングされない。

</span>
</p>

</dd>
<dt><a id="location"><span class="pod_lang"><code class="pod_iseq_C">location</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;location('http://example.org/')</code></pre>

<p>
<span class="pod_lang">CGIモードの時、指定されたURLへリダイレクトする。
このメソッドはあらゆる出力の前に呼ばなくてはならない。 

</span>
</p>

</dd>
<dt><a id="parsePeriod"><span class="pod_lang"><code class="pod_iseq_C">parsePeriod</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;parsePeriod('10hour 30min')</code></pre>

<p>
<span class="pod_lang">時間指定文字列を秒数に変換する。小数点が発生した場合は切り捨てる。
<a href="#Xe5XbaXa6Xe9X87X8fXe8Xa1Xa1">&quot;度量衡&quot;</a> を参照。

</span>
</p>

</dd>
<dt><a id="parseQuantity"><span class="pod_lang"><code class="pod_iseq_C">parseQuantity</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;parseQuantity('100mi 50ki')</code></pre>

<p>
<span class="pod_lang">量指定文字列を元の数に変換する。
<a href="#Xe5XbaXa6Xe9X87X8fXe8Xa1Xa1">&quot;度量衡&quot;</a> を参照。

</span>
</p>

</dd>
<dt><a id="getCookie"><span class="pod_lang"><code class="pod_iseq_C">getCookie</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Cookie.html">Tripletail::Cookie</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="getCsv"><span class="pod_lang"><code class="pod_iseq_C">getCsv</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/CSV.html">Tripletail::CSV</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newDateTime"><span class="pod_lang"><code class="pod_iseq_C">newDateTime</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/DateTime.html">Tripletail::DateTime</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="getDB"><span class="pod_lang"><code class="pod_iseq_C">getDB</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $DB = $TL-&gt;getDB($group)</code></pre>

<p>
<span class="pod_lang"><a href="././Tripletail/DB.html">Tripletail::DB</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newDB"><span class="pod_lang"><code class="pod_iseq_C">newDB</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $DB = $TL-&gt;newDB($group)</code></pre>

<p>
<span class="pod_lang"><a href="././Tripletail/DB.html">Tripletail::DB</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="getFileSentinel"><span class="pod_lang"><code class="pod_iseq_C">getFileSentinel</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/FileSentinel.html">Tripletail::FileSentinel</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newForm"><span class="pod_lang"><code class="pod_iseq_C">newForm</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Form.html">Tripletail::Form</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newHtmlFilter"><span class="pod_lang"><code class="pod_iseq_C">newHtmlFilter</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/HtmlFilter.html">Tripletail::HtmlFilter</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newHtmlMail"><span class="pod_lang"><code class="pod_iseq_C">newHtmlMail</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/HtmlMail.html">Tripletail::HtmlMail</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newIni"><span class="pod_lang"><code class="pod_iseq_C">newIni</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Ini.html">Tripletail::Ini</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newMail"><span class="pod_lang"><code class="pod_iseq_C">newMail</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Mail.html">Tripletail::Mail</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="getMemorySentinel"><span class="pod_lang"><code class="pod_iseq_C">getMemorySentinel</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/MemorySentinel.html">Tripletail::MemorySentinel</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newPager"><span class="pod_lang"><code class="pod_iseq_C">newPager</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Pager.html">Tripletail::Pager</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="getRawCookie"><span class="pod_lang"><code class="pod_iseq_C">getRawCookie</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/RawCookie.html">Tripletail::RawCookie</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newSendmail"><span class="pod_lang"><code class="pod_iseq_C">newSendmail</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Sendmail.html">Tripletail::Sendmail</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newSMIME"><span class="pod_lang"><code class="pod_iseq_C">newSMIME</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/SMIME.html">Tripletail::SMIME</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newTagCheck"><span class="pod_lang"><code class="pod_iseq_C">newTagCheck</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/TagCheck.html">Tripletail::TagCheck</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newTemplate"><span class="pod_lang"><code class="pod_iseq_C">newTemplate</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Template.html">Tripletail::Template</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="getSession"><span class="pod_lang"><code class="pod_iseq_C">getSession</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Session.html">Tripletail::Session</a> オブジェクトを取得。

</span>
</p>

</dd>
<dt><a id="newValue"><span class="pod_lang"><code class="pod_iseq_C">newValue</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Value.html">Tripletail::Value</a> オブジェクトを作成。

</span>
</p>

</dd>
<dt><a id="newValidator"><span class="pod_lang"><code class="pod_iseq_C">newValidator</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/Validator.html">Tripletail::Validator</a> オブジェクトを生成。

</span>
</p>

</dd>
<dt><a id="newMemCached"><span class="pod_lang"><code class="pod_iseq_C">newMemCached</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/MemCached.html">Tripletail::MemCached</a> オブジェクトを生成。

</span>
</p>

</dd>
<dt><a id="charconv"><span class="pod_lang"><code class="pod_iseq_C">charconv</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $str = $TL-&gt;charconv($str, $from, $to, $prefer_encode);
  $str = $TL-&gt;charconv($str, [$from1, $from2, ...], $to, $prefer_encode);
  
  $str = $TL-&gt;charconv($str, 'auto' =&gt; 'UTF-8');
  $str = $TL-&gt;charconv($str, ['EUC-JP', 'Shift_JIS'] =&gt; 'UTF-8');</code></pre>

<p>
<span class="pod_lang">文字コード変換を行う。 <a href="././Encode.html">Encode</a> が利用可能、且つ <code class="pod_iseq_C">$prefer_encode</code> が
真である場合は、 <a href="././Encode.html">Encode</a> が用いられる。そうでない場合は
<a href="././Unicode/Japanese.html">Unicode::Japanese</a> が用いられる。

</span>
</p>

<p>
<span class="pod_lang"><a href="././Encode.html">Encode</a> 使用時、変換元文字コードに <code class="pod_iseq_C">'auto'</code> を指定すると、
<a href="././Unicode/Japanese.html">Unicode::Japanese</a> の <a href="././Unicode/Japanese.html#getcode">getcode()</a>
と同じ優先順位で文字コードを自動判別する。また、エンコード名の候補を
配列で指定すると、指定された優先順位で自動判別する。

</span>
</p>

<p>
<span class="pod_lang"><a href="././Unicode/Japanese.html">Unicode::Japanese</a> 使用時に配列で候補を指定した場合は、その配列が無視され、
<code class="pod_iseq_C">'auto'</code> が指定されたものと見做される。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$from</code> が省略された場合は <code class="pod_iseq_C">'auto'</code> に、
<code class="pod_iseq_C">$to</code> が省略された場合は <code class="pod_iseq_C">'UTF-8'</code> になる。

</span>
</p>

<p>
<span class="pod_lang">確実に指定できる文字コードは、UTF-8，Shift_JIS，EUC-JP，ISO-2022-JP である。
それ以外の場合は、<a href="././Encode.html">Encode</a> と <a href="././Unicode/Japanese.html">Unicode::Japanese</a> のどちらが使用されるかにより使用できるものが異なる。

</span>
</p>

</dd>
<dt><a id="readFile"><span class="pod_lang"><code class="pod_iseq_C">readFile</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $data = $TL-&gt;readFile($fpath);</code></pre>

<p>
<span class="pod_lang">ファイルを読み込む。文字コード変換をしない。
ファイルロック処理は行わないので、使用の際には注意が必要。

</span>
</p>

</dd>
<dt><a id="readTextFile"><span class="pod_lang"><code class="pod_iseq_C">readTextFile</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $data = $TL-&gt;readTextFile($fpath, $coding, $prefer_encode);</code></pre>

<p>
<span class="pod_lang">ファイルを読み込み、UTF-8に変換する。
ファイルロック処理は行わないので、使用の際には注意が必要。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$coding</code> が省略された場合は <code class="pod_iseq_C">'auto'</code> となる。<code class="pod_iseq_C">$prefer_encode</code> を真
にすると <a href="././Encode.html">Encode</a> が利用可能な場合は <a href="././Encode.html">Encode</a> で変換する。

</span>
</p>

</dd>
<dt><a id="writeFile"><span class="pod_lang"><code class="pod_iseq_C">writeFile</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;writeFile($fpath, $fdata, $fmode);</code></pre>

<p>
<span class="pod_lang">ファイルにデータを書き込む。文字コード変換をしない。
ファイルロック処理は行わないので、使用の際には注意が必要。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$fmode</code> が0ならば、上書きモード。
<code class="pod_iseq_C">$fmode</code> が1ならば、追加モード。

</span>
</p>

<p>
<span class="pod_lang">省略された場合は上書きモードとなる。

</span>
</p>

</dd>
<dt><a id="writeTextFile"><span class="pod_lang"><code class="pod_iseq_C">writeTextFile</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;writeTextFile($fpath, $fdata, $fmode, $coding, $prefer_encode);</code></pre>

<p>
<span class="pod_lang">ファイルにデータを書き込む。<code class="pod_iseq_C">$fdata</code> をUTF-8と見なし、指定された文字コードへ変換を行う。
ファイルロック処理は行わないので、使用の際には注意が必要。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$fmode</code> が0ならば、上書きモード。
<code class="pod_iseq_C">$fmode</code> が1ならば、追加モード。

</span>
</p>

<p>
<span class="pod_lang">省略された場合は上書きモードとなる。

</span>
</p>

<p>
<span class="pod_lang"><code class="pod_iseq_C">$coding</code> が省略された場合、utf8として扱う。<code class="pod_iseq_C">$prefer_encode</code> を真にする
と <a href="././Encode.html">Encode</a> が利用可能な場合は <a href="././Encode.html">Encode</a> で変換する。

</span>
</p>

</dd>
<dt><a id="watch"><span class="pod_lang"><code class="pod_iseq_C">watch</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;watch(sdata =&gt; \$sdata, $reclevel);
  $TL-&gt;watch(adata =&gt; \@adata, $reclevel);
  $TL-&gt;watch(hdata =&gt; \%hdata, $reclevel);</code></pre>

<p>
<span class="pod_lang">指定したスカラー、配列、ハッシュデータの更新をウォッチし、ログに出力する。
第1引数で変数名を、第2引数で対象変数へのリファレンスを渡す。

</span>
</p>

<p>
<span class="pod_lang">第2引数はウォッチ対象の変数に、リファレンスが渡された場合に、
そのリファレンスの先を何段階ウォッチするかを指定する。デフォルトは0。

</span>
</p>

<p>
<span class="pod_lang">スカラー、配列、ハッシュ以外のリファレンスが代入された場合はエラーとなる。

</span>
</p>

<p>
<span class="pod_lang">また、再帰的にウォッチする場合、変数名は親の変数名を利用して自動的に設定される。

</span>
</p>

</dd>
<dt><a id="dump"><span class="pod_lang"><code class="pod_iseq_C">dump</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;dump(DATA =&gt; \$data);
  $TL-&gt;dump(DATA =&gt; \$data, $level);</code></pre>

<p>
<span class="pod_lang">第2引数に変数へのリファレンスを渡すと，その内容を Data::Dumper でダンプし、
第1引数のグループ名で $TL-&gt;log を呼び出す。

</span>
</p>

<p>
<span class="pod_lang">第3引数で、リファレンスをどのくらいの深さまで追うかを指定することが出来る。
指定しなければ全て表示される。

</span>
</p>

</dd>
<dt><a id="printCacheUnlessModified"><span class="pod_lang"><code class="pod_iseq_C">printCacheUnlessModified</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $bool = $TL-&gt;printCacheUnlessModified($key, $flag, $param, $charset)</code></pre>

<p>
<span class="pod_lang">第1引数で割り当てられたキーがメモリ上にキャッシュされているかを調べる。
利用するには、memcached が必須となる。

</span>
</p>

<p>
<span class="pod_lang">第2引数がonの場合、304を返す動作を行う。offの場合、304を返す動作を行わない。省略可能。

</span>
</p>

<p>
<span class="pod_lang">デフォルトはon。

</span>
</p>

<p>
<span class="pod_lang">第3引数では、<a href="././Tripletail/Form.html">Tripletail::Form</a> クラスのインスタンスを指定する。
Formクラスのキーが出力文字列中に存在している場合、値に置換する。省略可能。

</span>
</p>

<p>
<span class="pod_lang">第4引数では、第3引数で指定した文字列をUTF-8から変換する際の文字コードを指定する。
省略可能。

</span>
</p>

<p>
<span class="pod_lang">使用可能なコードは次の通り。
UTF-8，Shift_JIS，EUC-JP，ISO-2022-JP

</span>
</p>

<p>
<span class="pod_lang">デフォルトはShift_JIS。

</span>
</p>

<p>
<span class="pod_lang">第2引数がonの場合で、第3引数が省略された場合、以下の動作を行う。

</span>
</p>

<p>
<span class="pod_lang">1.memcachedからキーに割り当てられたキャッシュデータを読み込む。
データが無ければ、1を返す。

</span>
</p>

<p>
<span class="pod_lang">2.キャッシュデータの保存された時間と前回アクセスされた時間を比較し、
キャッシュデータが新しければキャッシュデータを出力し、undefを返す。

</span>
</p>

<p>
<span class="pod_lang">3.アクセスされた時間が新しければ、304ステータスを出力し、undefを返す。

</span>
</p>

<p>
<span class="pod_lang">この関数からundefを返された場合、以後出力を行う操作を行ってはならない。

</span>
</p>

</dd>
<dt><a id="setCache"><span class="pod_lang"><code class="pod_iseq_C">setCache</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;setCache($key, $param, $charset, $priority)</code></pre>

<p>
<span class="pod_lang">第1引数で割り当てられたキーに対して出力される内容をメモリ上にキャッシュする。
また、Last-Modifiedヘッダを出力する。
printCacheUnlessModifiedより後で実行する必要がある。
利用するには、memcached が必須となる。

</span>
</p>

<p>
<span class="pod_lang">第2引数では、<a href="././Tripletail/Form.html">Tripletail::Form</a> クラスのインスタンスを指定する。
Formクラスのキーが出力文字列中に存在している場合、値に置換する。省略可能。

</span>
</p>

<p>
<span class="pod_lang">第3引数では、第2引数で指定した文字列をUTF-8から変換する際の文字コードを指定する。
省略可能。

</span>
</p>

<p>
<span class="pod_lang">使用可能なコードは次の通り。
UTF-8，Shift_JIS，EUC-JP，ISO-2022-JP

</span>
</p>

<p>
<span class="pod_lang">デフォルトはShift_JIS。

</span>
</p>

<p>
<span class="pod_lang">第4引数には、<a href="././Tripletail/Filter/MemCached.html">Tripletail::Filter::MemCached</a>への優先度を記述する。省略可能。
デフォルトは1500。

</span>
</p>

<p>
<span class="pod_lang">Tripletail::Filter::MemCachedは必ず最後に実行する必要性があるため、
1500以上の優先度で設定するフィルタが他にある場合は手動で設定する必要がある。

</span>
</p>

</dd>
<dt><a id="deleteCache"><span class="pod_lang"><code class="pod_iseq_C">deleteCache</code>

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  $TL-&gt;deleteCache($key)</code></pre>

<p>
<span class="pod_lang">第1引数で割り当てられたキーのキャッシュを削除する。
利用するには、memcached が必須となる。

</span>
</p>

<p>
<span class="pod_lang">なお、setCacheの後にdeleteCacheを実行しても、setCacheでのメモリへの書き込みは、
処理の最後に行われるので、deleteCacheは反映されない。

</span>
</p>

<p>
<span class="pod_lang">本関数の使い方としては、キャッシュの内容を含んでいるデータを更新した場合に
該当するキャッシュを削除するように使用する。
それにより、次回アクセス時に最新の情報が出力される。

</span>
</p>

</dd>
<dt><a id="getDebug"><span class="pod_lang"><code class="pod_iseq_C">getDebug</code>

</span></a></dt>
<dd>
</dd>
<dt><a id="newError"><span class="pod_lang"><code class="pod_iseq_C">newError</code>

</span></a></dt>
<dd>
<p>
<span class="pod_lang">内部用メソッド。

</span>
</p>

</dd>
</dl>

<h2><a id="Ini_Xe3X83X91Xe3X83Xa9Xe3X83Xa1Xe3X83XbcXe3X82Xbf">
<span class="pod_lang">Ini パラメータ

</span></a></h2>

<p>
<span class="pod_lang">グループ名は常に <strong class="pod_iseq_B">TL</strong> でなければならない。

</span>
</p>

<p>
<span class="pod_lang">例:

</span>
</p>

<pre class="pod_verbatim"><code>  [TL]
  logdir = /home/www/cgilog/
  errortemplate = /home/www/error.html</code></pre>

<dl>
<dt><a id="maxrequestsize"><span class="pod_lang">maxrequestsize

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  maxrequestsize = 16M 500K</code></pre>

<p>
<span class="pod_lang">最大リクエストサイズ。但しファイルアップロードの分を除く。デフォルトは8M。

</span>
</p>

</dd>
<dt><a id="maxfilesize"><span class="pod_lang">maxfilesize

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  maxfilesize = 100M</code></pre>

<p>
<span class="pod_lang">一回のPOSTでアップロード可能なファイルサイズの合計。デフォルトは8M。ファ
イルのサイズは maxrequestsize とは別にカウントされ、ファイルでないもの
については maxrequestsize の値が使われる。

</span>
</p>

</dd>
<dt><a id="logdir"><span class="pod_lang">logdir

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  logdir = /home/www/cgilog/</code></pre>

<p>
<span class="pod_lang">ログの出力ディレクトリ。

</span>
</p>

</dd>
<dt><a id="tempdir"><span class="pod_lang">tempdir

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  tempdir = /tmp</code></pre>

<p>
<span class="pod_lang">一時ファイルを置くディレクトリ。このパラメータの指定が無い時、アップロー
ドされたファイルは全てメモリ上に置かれるが、指定があった場合は指定され
たディレクトリに一時ファイルとして置かれる。一時ファイルを作る際には、
ファイルを open した直後に unlink する為、アプリケーション側でファイル
ハンドルを閉じたりプロセスを終了したりすると、作られた一時ファイルは直
ちに自動で削除される。

</span>
</p>

</dd>
<dt><a id="errormail"><span class="pod_lang">errormail

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  errormail = null@example.org%Sendmail</code></pre>

<p>
<span class="pod_lang">sendErrorや、エラー発生時にメールを送る先を指定する。
アカウント名@ドメイン名%inigroup、の形式で指定する。
inigroupに。 <a href="././Tripletail/Sendmail.html">Tripletail::Sendmail</a> クラスで使用するinigroupを指定する。
inigroupが省略されると <code class="pod_iseq_C">'Sendmail'</code> が使われる。

</span>
</p>

</dd>
<dt><a id="errormailtype"><span class="pod_lang">errormailtype

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  errormailtype = error file-update memory-leak</code></pre>

<p>
<span class="pod_lang">どのような事象が発生した時に errormail で指定された先にメールを送るか。
以下の項目をスペース区切りで任意の数だけ指定する。
デフォルトは 'error memory-leak' である。

</span>
</p>

<dl>
<dt><a id="error"><span class="pod_lang">error

</span></a></dt>
<dd>
<p>
<span class="pod_lang">エラーが発生した時にメールを送る。
メールの内容にはスタックトレース等が含まれる。

</span>
</p>

</dd>
<dt><a id="file-update"><span class="pod_lang">file-update

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/FileSentinel.html">Tripletail::FileSentinel</a> が監視対象のファイルの更新を検出した時にメールを送る。
メールの内容には更新されたファイルやその更新時刻が含まれる。

</span>
</p>

</dd>
<dt><a id="memory-leak"><span class="pod_lang">memory-leak

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="././Tripletail/MemorySentinel.html">Tripletail::MemorySentinel</a> がメモリリークの可能性を検出した時にメールを送る。
メールの内容にはメモリの使用状況が含まれる。

</span>
</p>

</dd>
</dl>

</dd>
<dt><a id="errorlog"><span class="pod_lang">errorlog

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  errorlog = 1</code></pre>

<p>
<span class="pod_lang">エラー発生時にログに情報を残すかどうかを指定する。
1 が指定されればエラー情報を残す。
2 が指定されれば、エラー情報に加え、CGIのリクエスト内容も残す（startCgi内でのエラーのみ）。
3 が指定されれば、ローカル変数内容を含んだ詳細なエラー情報に加えて（但し PadWalker が必要）、CGIのリクエスト内容も残す。
0 であれば情報を残さない。
デフォルトは 1。

</span>
</p>

</dd>
<dt><a id="memorylog"><span class="pod_lang">memorylog

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  memorylog = full</code></pre>

<p>
<span class="pod_lang">リクエスト毎にメモリ消費状況をログに残すかどうかを指定する。
'leak', 'full' のどちらかから選ぶ。
'leak' の場合は、メモリリークが検出された場合のみログに残す。
'full' の場合は、メモリリークの検出とは無関係に、リクエスト毎にログに残す。
デフォルトは 'leak'。

</span>
</p>

</dd>
<dt><a id="trap"><span class="pod_lang">trap

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  trap = die</code></pre>

<p>
<span class="pod_lang">エラー処理の種類。'none', 'die'，'diewithprint' から選ぶ。デフォルトは'die'。

</span>
</p>

<dl>
<dt><a id="none"><span class="pod_lang">none

</span></a></dt>
<dd>
<p>
<span class="pod_lang">エラートラップを一切しない。

</span>
</p>

</dd>
<dt><a id="die"><span class="pod_lang">die

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> がdieした場合にエラー表示。それ以外の場所ではトラップしない。warnは見逃す。

</span>
</p>

</dd>
<dt><a id="diewithprint"><span class="pod_lang">diewithprint

</span></a></dt>
<dd>
<p>
<span class="pod_lang"><a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> がdieした場合にエラー表示。<a href="#MainXe9X96Xa2Xe6X95Xb0">&quot;Main関数&quot;</a> 以外でdieした場合は、ヘッダと共にエラー内容をテキストで表示する。warnは見逃す。

</span>
</p>

</dd>
</dl>

</dd>
<dt><a id="stacktrace"><span class="pod_lang">stacktrace

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  stacktrace = full</code></pre>

<p>
<span class="pod_lang">エラー発生時に表示するスタックトレースの種類。'none' の場合は、スタック
トレースを一切表示しない。'onlystack' の場合は、スタックトレースのみを
表示する。'full' の場合は、スタックトレースに加えてソースコード本体並び
に各フレームに於けるローカル変数の一覧をも表示する。デフォルトは
 'onlystack'。

</span>
</p>

<p>
<span class="pod_lang">但しローカル変数一覧を表示するには <a href="././PadWalker.html">PadWalker</a> がインストールされてい
なければならない。

</span>
</p>

<p>
<span class="pod_lang">注意: 'full' の状態では、stackallow で許された全てのユーザーが、
ブラウザから全てのソースコード及び ini
ファイルの中身を読む事が出来る点に注意すること。

</span>
</p>

</dd>
<dt><a id="stackallow"><span class="pod_lang">stackallow

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  stackallow = 192.168.0.0/24</code></pre>

<p>
<span class="pod_lang">stacktrace の値が 'none' でない場合であっても、stackallow で指定された
ネットマスクに該当しない IP からの接続である場合には、スタックトレース
を表示しない。マスクは空白で区切って複数個指定する事が可能。
デフォルトは全て禁止。

</span>
</p>

</dd>
<dt><a id="maxrequestcount"><span class="pod_lang">maxrequestcount

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  maxrequestcount = 100</code></pre>

<p>
<span class="pod_lang">FastCGIモード時に、1つのプロセスで何回まで処理を行うかを設定する。
0を設定すれば回数によってプロセスが終了することはない。
デフォルトは0。

</span>
</p>

</dd>
<dt><a id="errortemplate"><span class="pod_lang">errortemplate

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  errortemplate = /home/www/error.html</code></pre>

<p>
<span class="pod_lang">エラー発生時に、通常のエラー表示ではなく、指定された
テンプレートファイルを表示する。

</span>
</p>

</dd>
<dt><a id="outputbuffering"><span class="pod_lang">outputbuffering

</span></a></dt>
<dd>
<pre class="pod_verbatim"><code>  outputbuffering = 0</code></pre>

<p>
<span class="pod_lang">startCgi メソッド中で出力をバッファリングする。デフォルトは0。

</span>
</p>

<p>
<span class="pod_lang">バッファリングしない場合、print した内容はすぐに表示されるが、少しでも表示を行った後にエラーが発生した場合は、エラーテンプレートが綺麗に表示されない。

</span>
</p>

<p>
<span class="pod_lang">バッファリングを行った場合、print した内容はリクエスト終了時まで表示されないが、処理中にエラーが発生した場合、出力内容は破棄され，エラーテンプレートの内容に差し替えられる。

</span>
</p>

</dd>
</dl>

<h2><a id="Xe5XbaXa6Xe9X87X8fXe8Xa1Xa1">
<span class="pod_lang">度量衡

</span></a></h2>

<h3><a id="Xe6X99X82Xe9X96X93Xe6X8cX87Xe5XaeX9a">
<span class="pod_lang">時間指定

</span></a></h3>

<p>
<span class="pod_lang">各種タイムアウト時間，セッションのexpiresなど、
時間間隔は以下の指定が可能とする。

</span>
</p>

<p>
<span class="pod_lang">単位は大文字小文字を区別しない。

</span>
</p>

<dl>
<dt><a id="Xe6X95Xb0Xe5X80Xa4Xe3X81XaeXe3X81Xbf"><span class="pod_lang">数値のみ

</span></a></dt>
<dd>
<p>
<span class="pod_lang">秒数での指定を表す。

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'sec'_or_'second'_or_'seconds'"><span class="pod_lang">数値＋ 'sec' or 'second' or 'seconds'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">秒での指定を表す。[×1]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'min'_or_'minute'_or_'minutes'"><span class="pod_lang">数値＋ 'min' or 'minute' or 'minutes'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">分での指定を表す。[×60]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'hour'_or_'hours'"><span class="pod_lang">数値＋ 'hour' or 'hours'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">時間での指定を表す。[×3600]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'day'_or_'days'"><span class="pod_lang">数値＋ 'day' or 'days'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">日数での指定を表す。[×24*3600]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'mon'_or_'month'_or_'months'"><span class="pod_lang">数値＋ 'mon' or 'month' or 'months'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">月での指定を表す。１月＝30.436875日として計算する。 [×30.436875*24*3600]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'year'_or_'years'"><span class="pod_lang">数値＋ 'year' or 'years'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">年での指定を表す。１年＝365.2425日として計算する。 [×365.2425*24*3600]

</span>
</p>

</dd>
</dl>

<h3><a id="Xe9X87X8fXe6X8cX87Xe5XaeX9a">
<span class="pod_lang">量指定

</span></a></h3>

<p>
<span class="pod_lang">メモリサイズ、文字列サイズ等、大きさを指定する場合には、
以下の指定が可能とする。英字の大文字小文字は同一視する。

</span>
</p>

<h4><a id="X10Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">
<span class="pod_lang">10進数系

</span></a></h4>

<dl>
<dt><a id="Xe6X95Xb0Xe5X80Xa4Xe3X81XaeXe3X81Xbf_00"><span class="pod_lang">数値のみ

</span></a></dt>
<dd>
<p>
<span class="pod_lang">そのままの数を表す。

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'k'"><span class="pod_lang">数値＋ 'k'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000の指定を表す。[×1,000]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'m'"><span class="pod_lang">数値＋ 'm'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000^2の指定を表す。[×1,000,000=×1,000^2]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'g'"><span class="pod_lang">数値＋ 'g'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000^3の指定を表す。[×1,000,000,000=×1,000^3]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'t'"><span class="pod_lang">数値＋ 't'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000^4の指定を表す。[×1,000,000,000,000=×1,000^4]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'p'"><span class="pod_lang">数値＋ 'p'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000^5の指定を表す。[×1,000,000,000,000,000=×1,000^5]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'e'"><span class="pod_lang">数値＋ 'e'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1000^6の指定を表す。[×1,000,000,000,000,000,000=×1,000^6]

</span>
</p>

</dd>
</dl>

<h4><a id="X2Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">
<span class="pod_lang">2進数系

</span></a></h4>

<dl>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ki'"><span class="pod_lang">数値＋ 'Ki'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024の指定を表す。[×1024=2^10]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Mi'"><span class="pod_lang">数値＋ 'Mi'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024^2の指定を表す。[×1024^2=2^20]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Gi'"><span class="pod_lang">数値＋ 'Gi'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024^3の指定を表す。[×1024^3=2^30]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ti'"><span class="pod_lang">数値＋ 'Ti'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024^4の指定を表す。[×1024^4=2^40]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Pi'"><span class="pod_lang">数値＋ 'Pi'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024^5の指定を表す。[×1024^5=2^50]

</span>
</p>

</dd>
<dt><a id="Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ei'"><span class="pod_lang">数値＋ 'Ei'

</span></a></dt>
<dd>
<p>
<span class="pod_lang">数値×1024^6の指定を表す。[×1024^6=2^60]

</span>
</p>

</dd>
</dl>


<hr />
<h1><a id="SEE_ALSO">
<span class="pod_lang">SEE ALSO

</span></a></h1>

<dl>
<dt><a id="X_"><span class="pod_lang"><a href="././Tripletail/Cookie.html">Tripletail::Cookie</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__00"><span class="pod_lang"><a href="././Tripletail/DB.html">Tripletail::DB</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__01"><span class="pod_lang"><a href="././Tripletail/Debug.html">Tripletail::Debug</a>

</span></a></dt>
<dd>
<p>
<span class="pod_lang">CGI向けデバッグ機能。

</span>
</p>

<p>
<span class="pod_lang">リクエストや応答のログ記録、デバッグ情報のポップアップ表示、他。

</span>
</p>

</dd>
<dt><a id="X__02"><span class="pod_lang"><a href="././Tripletail/Filter.html">Tripletail::Filter</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__03"><span class="pod_lang"><a href="././Tripletail/FileSentinel.html">Tripletail::FileSentinel</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__04"><span class="pod_lang"><a href="././Tripletail/Form.html">Tripletail::Form</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__05"><span class="pod_lang"><a href="././Tripletail/HtmlFilter.html">Tripletail::HtmlFilter</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__06"><span class="pod_lang"><a href="././Tripletail/HtmlMail.html">Tripletail::HtmlMail</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__07"><span class="pod_lang"><a href="././Tripletail/Ini.html">Tripletail::Ini</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__08"><span class="pod_lang"><a href="././Tripletail/InputFilter.html">Tripletail::InputFilter</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__09"><span class="pod_lang"><a href="././Tripletail/Mail.html">Tripletail::Mail</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__10"><span class="pod_lang"><a href="././Tripletail/MemorySentinel.html">Tripletail::MemorySentinel</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__11"><span class="pod_lang"><a href="././Tripletail/Pager.html">Tripletail::Pager</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__12"><span class="pod_lang"><a href="././Tripletail/RawCookie.html">Tripletail::RawCookie</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__13"><span class="pod_lang"><a href="././Tripletail/Sendmail.html">Tripletail::Sendmail</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__14"><span class="pod_lang"><a href="././Tripletail/SMIME.html">Tripletail::SMIME</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__15"><span class="pod_lang"><a href="././Tripletail/TagCheck.html">Tripletail::TagCheck</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__16"><span class="pod_lang"><a href="././Tripletail/Template.html">Tripletail::Template</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__17"><span class="pod_lang"><a href="././Tripletail/Session.html">Tripletail::Session</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__18"><span class="pod_lang"><a href="././Tripletail/Value.html">Tripletail::Value</a>

</span></a></dt>
<dd>
</dd>
<dt><a id="X__19"><span class="pod_lang"><a href="././Tripletail/Validator.html">Tripletail::Validator</a>

</span></a></dt>
<dd>
</dd>
</dl>


<hr />
<h1><a id="AUTHOR_INFORMATION">
<span class="pod_lang">AUTHOR INFORMATION

</span></a></h1>

<ul>
<p>
<span class="pod_lang">Copyright 2006 YMIRLINK Inc. All Rights Reserved.

</span>
</p>

<p>
<span class="pod_lang">This framework is free software; you can redistribute it and/or modify it under the same terms as Perl itself

</span>
</p>

<p>
<span class="pod_lang">このフレームワークはフリーソフトウェアです。あなたは Perl と同じライセンスの 元で再配布及び変更を行うことが出来ます。

</span>
</p>

<p>
<span class="pod_lang">Address bug reports and comments to: tl@tripletail.jp

</span>
</p>

<p>
<span class="pod_lang">HP : http://tripletail.jp/

</span>
</p>

</ul>

<!-- End CONTENT -->

<div class="pod_title_block">
Tripletail - Tripletail, Framework for Japanese Web Application


</div>

<!-- Begin INDEX -->
<hr />
<h1><a id="INDEX"><span class="pod_lang">INDEX</span></a></h1>
<div class="pod_idx_outer">
<ul class="pod_idx">
<li><a href="#X10Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">10進数系</a></li>
<li><a href="#X2Xe9X80Xb2Xe6X95Xb0Xe7Xb3Xbb">2進数系</a></li>
<li><a href="#AUTHOR_INFORMATION">AUTHOR INFORMATION</a></li>
<li><a href="#CGI">CGI</a></li>
<li><a href="#CGIXe3X83Xa2Xe3X83XbcXe3X83X89">CGIモード</a></li>
<li><a href="#DESCRIPTION">DESCRIPTION</a></li>
<li><a href="#FastCGIXe3X83Xa2Xe3X83XbcXe3X83X89">FastCGIモード</a></li>
<li><a href="#INI">INI</a></li>
<li><a href="#Ini_Xe3X83X91Xe3X83Xa9Xe3X83Xa1Xe3X83XbcXe3X82Xbf">Ini パラメータ</a></li>
<li><a href="#METHODS">METHODS</a></li>
<li><a href="#MainXe9X96Xa2Xe6X95Xb0">Main関数</a></li>
<li><a href="#NAME">NAME</a></li>
<li><a href="#NAME_(ja)">NAME (ja)</a></li>
<li><a href="#SEE_ALSO">SEE ALSO</a></li>
<li><a href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a href="#X_">Tripletail::Cookie</a></li>
<li><a href="#X__00">Tripletail::DB</a></li>
<li><a href="#X__01">Tripletail::Debug</a></li>
<li><a href="#X__03">Tripletail::FileSentinel</a></li>
<li><a href="#X__02">Tripletail::Filter</a></li>
<li><a href="#X__04">Tripletail::Form</a></li>
<li><a href="#X__05">Tripletail::HtmlFilter</a></li>
<li><a href="#X__06">Tripletail::HtmlMail</a></li>
<li><a href="#X__07">Tripletail::Ini</a></li>
<li><a href="#X__08">Tripletail::InputFilter</a></li>
<li><a href="#X__09">Tripletail::Mail</a></li>
<li><a href="#X__10">Tripletail::MemorySentinel</a></li>
<li><a href="#X__11">Tripletail::Pager</a></li>
<li><a href="#X__12">Tripletail::RawCookie</a></li>
<li><a href="#X__14">Tripletail::SMIME</a></li>
<li><a href="#X__13">Tripletail::Sendmail</a></li>
<li><a href="#X__17">Tripletail::Session</a></li>
<li><a href="#X__15">Tripletail::TagCheck</a></li>
<li><a href="#X__16">Tripletail::Template</a></li>
<li><a href="#X__19">Tripletail::Validator</a></li>
<li><a href="#X__18">Tripletail::Value</a></li>
<li><a href="#charconv">charconv</a></li>
<li><a href="#decodeURL">decodeURL</a></li>
<li><a href="#deleteCache">deleteCache</a></li>
<li><a href="#die">die</a></li>
<li><a href="#diewithprint">diewithprint</a></li>
<li><a href="#dispatch">dispatch</a></li>
<li><a href="#dump">dump</a></li>
<li><a href="#encodeURL">encodeURL</a></li>
<li><a href="#error">error</a></li>
<li><a href="#errorTrap">errorTrap</a></li>
<li><a href="#errorlog">errorlog</a></li>
<li><a href="#errormail">errormail</a></li>
<li><a href="#errormailtype">errormailtype</a></li>
<li><a href="#errortemplate">errortemplate</a></li>
<li><a href="#escapeJs">escapeJs</a></li>
<li><a href="#escapeSqlLike">escapeSqlLike</a></li>
<li><a href="#escapeTag">escapeTag</a></li>
<li><a href="#file-update">file-update</a></li>
<li><a href="#getContentFilter">getContentFilter</a></li>
<li><a href="#getCookie">getCookie</a></li>
<li><a href="#getCsv">getCsv</a></li>
<li><a href="#getDB">getDB</a></li>
<li><a href="#getDebug">getDebug</a></li>
<li><a href="#getFileSentinel">getFileSentinel</a></li>
<li><a href="#getInputFilter">getInputFilter</a></li>
<li><a href="#getLogHeader">getLogHeader</a></li>
<li><a href="#getMemorySentinel">getMemorySentinel</a></li>
<li><a href="#getRawCookie">getRawCookie</a></li>
<li><a href="#getSession">getSession</a></li>
<li><a href="#init">init</a></li>
<li><a href="#location">location</a></li>
<li><a href="#log">log</a></li>
<li><a href="#logdir">logdir</a></li>
<li><a href="#maxfilesize">maxfilesize</a></li>
<li><a href="#maxrequestcount">maxrequestcount</a></li>
<li><a href="#maxrequestsize">maxrequestsize</a></li>
<li><a href="#memory-leak">memory-leak</a></li>
<li><a href="#memorylog">memorylog</a></li>
<li><a href="#newDB">newDB</a></li>
<li><a href="#newDateTime">newDateTime</a></li>
<li><a href="#newError">newError</a></li>
<li><a href="#newForm">newForm</a></li>
<li><a href="#newHtmlFilter">newHtmlFilter</a></li>
<li><a href="#newHtmlMail">newHtmlMail</a></li>
<li><a href="#newIni">newIni</a></li>
<li><a href="#newMail">newMail</a></li>
<li><a href="#newMemCached">newMemCached</a></li>
<li><a href="#newPager">newPager</a></li>
<li><a href="#newSMIME">newSMIME</a></li>
<li><a href="#newSendmail">newSendmail</a></li>
<li><a href="#newTagCheck">newTagCheck</a></li>
<li><a href="#newTemplate">newTemplate</a></li>
<li><a href="#newValidator">newValidator</a></li>
<li><a href="#newValue">newValue</a></li>
<li><a href="#none">none</a></li>
<li><a href="#outputbuffering">outputbuffering</a></li>
<li><a href="#parsePeriod">parsePeriod</a></li>
<li><a href="#parseQuantity">parseQuantity</a></li>
<li><a href="#postRequest">postRequest</a></li>
<li><a href="#preRequest">preRequest</a></li>
<li><a href="#print">print</a></li>
<li><a href="#printCacheUnlessModified">printCacheUnlessModified</a></li>
<li><a href="#readFile">readFile</a></li>
<li><a href="#readTextFile">readTextFile</a></li>
<li><a href="#removeContentFilter">removeContentFilter</a></li>
<li><a href="#removeHook">removeHook</a></li>
<li><a href="#removeInputFilter">removeInputFilter</a></li>
<li><a href="#sendError">sendError</a></li>
<li><a href="#setCache">setCache</a></li>
<li><a href="#setContentFilter">setContentFilter</a></li>
<li><a href="#setHook">setHook</a></li>
<li><a href="#setInputFilter">setInputFilter</a></li>
<li><a href="#stackallow">stackallow</a></li>
<li><a href="#stacktrace">stacktrace</a></li>
<li><a href="#startCgi">startCgi</a></li>
<li><a href="#tempdir">tempdir</a></li>
<li><a href="#term">term</a></li>
<li><a href="#trap">trap</a></li>
<li><a href="#unescapeJs">unescapeJs</a></li>
<li><a href="#unescapeSqlLike">unescapeSqlLike</a></li>
<li><a href="#unescapeTag">unescapeTag</a></li>
<li><a href="#use">use</a></li>
<li><a href="#watch">watch</a></li>
<li><a href="#writeFile">writeFile</a></li>
<li><a href="#writeTextFile">writeTextFile</a></li>
<li><a href="#Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5Xe3X81XaeXe5X88Xa9Xe7X94Xa8">キャッシュの利用</a></li>
<li><a href="#Xe3X83X95Xe3X83X83Xe3X82Xaf">フック</a></li>
<li><a href="#Xe4Xb8X80Xe8X88XacXe3X82Xb9Xe3X82XafXe3X83XaaXe3X83X97Xe3X83X88Xe3X83Xa2Xe3X83XbcXe3X83X89">一般スクリプトモード</a></li>
<li><a href="#Xe5X85Xa5Xe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">入力フィルタ</a></li>
<li><a href="#Xe5X87XbaXe5X8aX9bXe3X83X95Xe3X82Xa3Xe3X83XabXe3X82Xbf">出力フィルタ</a></li>
<li><a href="#Xe5XaeX9fXe8Xa1X8cXe3X83Xa2Xe3X83XbcXe3X83X89">実行モード</a></li>
<li><a href="#Xe5XbaXa6Xe9X87X8fXe8Xa1Xa1">度量衡</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4Xe3X81XaeXe3X81Xbf_00">数値のみ</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ei'">数値＋ 'Ei'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Gi'">数値＋ 'Gi'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ki'">数値＋ 'Ki'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Mi'">数値＋ 'Mi'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Pi'">数値＋ 'Pi'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'Ti'">数値＋ 'Ti'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'day'_or_'days'">数値＋ 'day' or 'days'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'e'">数値＋ 'e'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'g'">数値＋ 'g'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'hour'_or_'hours'">数値＋ 'hour' or 'hours'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'k'">数値＋ 'k'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'m'">数値＋ 'm'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'min'_or_'minute'_or_'minutes'">数値＋ 'min' or 'minute' or 'minutes'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'mon'_or_'month'_or_'months'">数値＋ 'mon' or 'month' or 'months'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'p'">数値＋ 'p'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'sec'_or_'second'_or_'seconds'">数値＋ 'sec' or 'second' or 'seconds'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'t'">数値＋ 't'</a></li>
<li><a href="#Xe6X95Xb0Xe5X80Xa4XefXbcX8b_'year'_or_'years'">数値＋ 'year' or 'years'</a></li>
<li><a href="#Xe6X99X82Xe9X96X93Xe6X8cX87Xe5XaeX9a">時間指定</a></li>
<li><a href="#Xe6X9bXb8Xe3X81X8dXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83X9aXe3X83XbcXe3X82Xb8Xe5X85Xa8Xe4XbdX93Xe3X82X92Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5XefXbcX89">書き込み側例（ページ全体をキャッシュ）</a></li>
<li><a href="#Xe6X9bXb8Xe3X81X8dXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83Xa6Xe3X83XbcXe3X82Xb6Xe3X83XbcXe5X90X8dXe7XadX89Xe4Xb8X80Xe9X83Xa8Xe3X81XabXe5X9bXbaXe6X9cX89Xe3X81XaeXe6X83X85Xe5Xa0Xb1Xe3X82X92Xe5X9fX8bXe3X82X81Xe8XbeXbcXe3X82X93Xe3X81Xa7Xe3X81X84Xe3X82X8bXe5Xa0Xb4Xe5X90X88XefXbcX89">書き込み側例（ユーザー名等一部に固有の情報を埋め込んでいる場合）</a></li>
<li><a href="#Xe7X89Xb9Xe5X8cX96Xe6X8cX87Xe5XaeX9a">特化指定</a></li>
<li><a href="#Xe8XaaXadXe3X81XbfXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83X9aXe3X83XbcXe3X82Xb8Xe5X85Xa8Xe4XbdX93Xe3X82X92Xe3X82XadXe3X83Xa3Xe3X83X83Xe3X82Xb7Xe3X83Xa5XefXbcX89">読み込み側例（ページ全体をキャッシュ）</a></li>
<li><a href="#Xe8XaaXadXe3X81XbfXe8XbeXbcXe3X81XbfXe5X81Xb4Xe4XbeX8bXefXbcX88Xe3X83Xa6Xe3X83XbcXe3X82Xb6Xe3X83XbcXe5X90X8dXe7XadX89Xe4Xb8X80Xe9X83Xa8Xe3X81XabXe5X9bXbaXe6X9cX89Xe3X81XaeXe6X83X85Xe5Xa0Xb1Xe3X82X92Xe5X9fX8bXe3X82X81Xe8XbeXbcXe3X82X93Xe3X81Xa7Xe3X81X84Xe3X82X8bXe5Xa0Xb4Xe5X90X88XefXbcX89">読み込み側例（ユーザー名等一部に固有の情報を埋め込んでいる場合）</a></li>
<li><a href="#Xe9X87X8fXe6X8cX87Xe5XaeX9a">量指定</a></li>
</ul>
</div>
<!-- End INDEX -->

<div class="pod_title_block">
Tripletail - Tripletail, Framework for Japanese Web Application


</div>

</body>
</html>
